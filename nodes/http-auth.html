<script type="text/javascript">
	/* global RED:false */
	RED.nodes.registerType('node-red-http-basic-auth', {
		category: 'function',
		inputs: 1,
		outputs: 1,
		defaults: {
			name: { value: '' },
			file: { value: '', type: 'node-red-http-basic-auth-file', required: false },
			cred: { value: '', type: 'node-red-http-basic-auth-cred', required: false },
			realm: { value: '' },
			username: { value: '' },
			password: { value: '' },
			hashed: { value: false },
		},
		color: '#E7E7AE',
		icon: 'white-globe.png',
		label: function () { return this.name.trim() || 'http auth'; },
		labelStyle: function () { return this.name.trim() ? 'node_label_italic' : ''; },
		paletteLabel: 'http auth',
	});
</script>

<script type="text/x-red" data-template-name="node-red-http-basic-auth">
	<div class="form-row">
		<label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
		<input type="text" id="node-input-name" />
	</div>
	<hr />
	<div class="form-row">
		<label for="node-input-file"><i class="fa fa-list"></i> File</label>
		<input type="text" id="node-input-file" />
	</div>
	<hr />
	<div class="form-row">
		<label for="node-input-cred"><i class="fa fa-list"></i> Credentials</label>
		<input type="text" id="node-input-cred" />
	</div>
	<hr />
	<div class="form-row">
		<label for="node-input-realm"><i class="fa fa-globe"></i> Realm</label>
		<input type="text" id="node-input-realm" />
	</div>
	<div class="form-row">
		<label for="node-input-username"><i class="fa fa-user"></i> Username</label>
		<input type="text" id="node-input-username" />
	</div>
	<div class="form-row">
		<label for="node-input-password"><i class="fa fa-key"></i> Password</label>
		<input type="text" id="node-input-password" />
	</div>
	<div class="form-row">
		<label for="node-input-hashed"><i class="fa fa-asterisk"></i> Hashed</label>
		<input type="checkbox" id="node-input-hashed" />
	</div>
</script>

<script type="text/x-red" data-help-name="node-red-http-basic-auth">
<p>Node-RED node for HTTP Basic Auth</p>

<p>
	This Node-RED module performs Basic authentication.
	It is to be used in conjunction with an HTTP Input node.
</p>

<p>
	<img src="https://raw.githubusercontent.com/alexandrainst/node-red-http-basic-auth/main/images/flow.png" />
<p>

<h2>Config</h2>
<p>
	<img src="https://raw.githubusercontent.com/alexandrainst/node-red-http-basic-auth/main/images/config.png" />
</p>
<p>There are three type of configuration:</p>
<ol>
	<li><i>File</i>: the user credentials are stored in a file. (multiple credentials)</li>
	<li><i>Shared</i>: credentials shared which multiple nodes. (one credential)</li>
	<li><i>Not Shared</i>: each node has it's own credentials. (one credential)</li>
</ol>

<p>With all three config types you must specify the following:</p>
<ul>
	<li><i>Realm</i>: what realm will be used with this node</li>
	<li><i>Hashed</i>: are the passwords in the Password field or in the credentials file hashed.</li>
</ul>

<p>With <i>Shared</i> and <i>Not Shared</i> config types you must specify the following:</p>
<ul>
	<li><i>Username</i>: the username</li>
	<li>
		<i>Password</i>: the password.<br />
		If you entered a hashed password you must check the Hashed checkbox.
	</li>
</ul>

<p>With <i>File</i> config type you must specify the following:</p>
<ul>
	<li>
		<i>File</i>: location of the file containing the credentials relative to the presently working directory.<br />
		If the password are hashed you must check the Hashed checkbox.
	</li>
</ul>

<h3>File Configuration</h3>
<p>
	<img src="https://raw.githubusercontent.com/alexandrainst/node-red-http-basic-auth/main/images/file.png" />
</p>

<h3>Shared config</h3>
<p>
	<img src="https://raw.githubusercontent.com/alexandrainst/node-red-http-basic-auth/main/images/cred.png" />
</p>
</script>
